<% provide(:titulo, 'Editar usuario') %>

<div class="centering">
  <h1 style="text-align: center;">Editar perfil de <%= @user.nombre %></h1><br>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { multipart: true, method: :put }) do |f| %>
    <%= devise_error_messages! %>

    <div class="form-group">
      <%= f.label :Foto_de_perfil %> <br />
      <%= f.file_field :avatar %>
    </div>

    <div class="form-group">
      <%= f.label :email %><br />
      <%= f.email_field :email, :readonly => true, class:"form-control" %>
    </div>

    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div>Todavia no se confirmo el mail: <%= resource.unconfirmed_email %></div>
    <% end %>

    <div class="form-group">
      <%= f.label :nombre %><br/>
      <%= f.text_field :nombre, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :apellido %><br/>
      <%= f.text_field :apellido, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :fecha_nacimiento %><br/>
      <%= f.date_field :fecha_nacimiento, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :telefono %><br/>
      <%= f.text_field :telefono, class: "form-control" %>
    </div>

    <hr class="my-hr">

    <p>
      <a data-toggle="collapse" data-target="#escondido" default="hide", class="btn btn-sm colapso my-button-with2">
        Tarjeta:
      </a>
    </p>

    <div class="collapse" id="escondido">
      <div class="row">
        <div class="form-group col-xs-6">
          <%= f.label "Numero de tarjeta" %>
          <%= f.text_field :tarjeta, maxlength: 16, class: "form-control flotar-medio" %>
        </div>
        <div class="form-group col-xs-6">
          <%= f.label :fecha_vencimiento %>
          <%= f.date_select :fecha_vencimiento, {start_year: Date.today.year, end_year: Date.today.year+10, use_short_month: true, discard_day: true}, class: "form-control flotar-medio" %><br>
        </div>
      </div>
    </div>

    <hr class="my-hr">

    <p>
      <a data-toggle="collapse" data-target="#escondido2" default="hide", class="btn btn-sm colapso my-button-with2">
        Cambiar contraseña:
      </a>
    </p>

    <div class="collapse" id="escondido2">
      <div class="form-group">
        <%= f.label :password, "Contraseña" %> <i>(dejar en blanco si no quieres cambiarla)</i><br />
        <%= f.password_field :password, autocomplete: "off", class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :password_confirmation, "Confirmar contraseña" %><br />
        <%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control" %>
      </div>
    </div>

    <hr class="my-hr">

    <div class="form-group">
      <%= f.label :current_password, "Contraseña actual" %> <i>(necesitamos tu contraseña actual para confirmar los cambios)</i><br />
      <%= f.password_field :current_password, autocomplete: "off", class: "form-control" %>
    </div>

    <center>
      <div class="actions">
        <%= f.submit "Actualizar", class:"btn  my-link-button my-button-color my-button-with"  %>
      </div>
    </center>
  <% end %>
  <br>
  <br>
  <%= link_to "Volver", current_user %>

  <hr style="height:1px;border-width:0;color:gray;background-color:#BB9797">

  <div>
    <h3>Cancelar mi cuenta.</h3>
    <p>No estas contento con nuestro servicio? <%= button_to "Cancelar mi cuenta", registration_path(resource_name), data: { confirm: "¿Estas seguro que deseas eliminar tu cuenta? Se te quitara de los viajes en los que estes postulado y todavía no te hayan aceptado." }, method: :delete %>
    </p>
    <br>
    <br>
  </div>
</div>
